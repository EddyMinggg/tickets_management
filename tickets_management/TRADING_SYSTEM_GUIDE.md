# 🎫 門票交易管理系統 - 新功能說明

## 📋 完整的交易管理系統

為了幫助你系統性地管理在多個平台的購入和售出，我添加了完整的交易追蹤功能。

---

## 🎯 核心功能

### 1️⃣ **購入來源管理** (Ticket Sources)

跟蹤每一批門票的購入細節：

**可記錄的信息：**
- 🧑 **賣家信息**：賣家名稱/昵稱
- 📱 **聯絡方式**：WhatsApp、微信、電話等
- 🌐 **購入平台**：蝦皮、Carousell、eBay、雅虎拍賣等
- 📦 **購買細節**：購入數量、單位價格、總成本
- 💱 **幣種**：港幣 (HKD) 或人民幣 (CNY)
- 📝 **備註**：購買過程、折扣、額外費用等

**訪問方式：**
- 在門票卡片上點擊 **🔍 購入來源** 按鈕
- 查看所有購入來源、新增、編輯或刪除

---

### 2️⃣ **售出詳情管理** (Ticket Sales)

詳細記錄每一次的售出情況：

**買家信息：**
- 👤 買家名稱
- 📱 買家聯絡方式（微信、QQ、電話等）
- 🌐 銷售平台（58.com、閒魚、微信朋友圈、小紅書等）

**售賣信息：**
- 📊 售賣數量、單價、總收入
- 💱 幣種（港幣或人民幣）
- 📅 售賣日期
- 📈 售賣狀態（待確認 → 已確認 → 已發貨 → 已完成）

**郵寄追蹤：**
- 📍 買家郵寄地址
- 🚚 郵寄方式（順豐、中通、圓通、申通、郵政、自提等）
- 📦 物流單號（方便買家追蹤）
- 📅 發貨日期

**其他：**
- 💬 備註（特殊要求、協商事項等）

**訪問方式：**
- 在門票卡片上點擊 **💰 售出詳情** 按鈕
- 查看所有售出記錄、新增、編輯或刪除

---

## 🔄 使用流程

### 流程 A：購入新門票 → 記錄購入來源

```
1. 在二手網站購買門票
   ↓
2. 在應用中點擊 ➕ 購入門票
   ↓
3. 填寫基本信息（日期、座位、數量等）
   ↓
4. 保存後，點擊門票卡片上的 🔍 購入來源
   ↓
5. 點擊 ➕ 添加新的購入來源
   ↓
6. 填寫詳細信息（賣家、平台、價格等）
   ↓
✅ 系統記錄所有購入細節
```

### 流程 B：售出門票 → 記錄售出詳情

```
1. 收到買家詢問，決定售出
   ↓
2. 在門票卡片上點擊 💰 售出詳情
   ↓
3. 點擊 ➕ 添加新的售賣記錄
   ↓
4. 填寫買家信息和售賣細節
   ↓
5. 設置售賣狀態（待確認、已確認等）
   ↓
6. 如需郵寄，填寫地址、快遞公司、單號
   ↓
✅ 系統自動更新剩餘門票數量
✅ 完整追蹤整個交易過程
```

---

## 📊 數據結構

### ticket_sources 表
```
- id (主鍵)
- ticket_id (關鍵外鍵)
- seller_name (賣家名稱)
- seller_contact (聯絡方式)
- platform (平台)
- quantity_purchased (數量)
- unit_price (單價)
- total_cost (總成本)
- currency (幣種)
- notes (備註)
- timestamps (創建/更新時間)
```

### ticket_sales 表
```
- id (主鍵)
- ticket_id (關鍵外鍵)
- buyer_name (買家名稱)
- buyer_contact (聯絡方式)
- platform (銷售平台)
- quantity_sold (售出數量)
- unit_price (售價)
- total_revenue (總收入)
- currency (幣種)
- sale_status (狀態: pending/confirmed/shipped/completed)
- shipping_address (郵寄地址)
- shipping_method (郵寄方式)
- tracking_number (物流單號)
- sale_date (售賣日期)
- shipped_date (發貨日期)
- notes (備註)
- timestamps (創建/更新時間)
```

---

## 🎨 界面特點

- ✨ **卡片式設計**：清晰展示每一條記錄
- 🎯 **快速編輯**：點擊卡片上的 ✏️ 快速編輯
- 🗑️ **快速刪除**：點擊卡片上的 🗑️ 快速刪除
- 🌙 **Dark Mode 支持**：自動適應手機深色模式
- 📱 **移動優先**：完全適配手機屏幕

---

## 💡 使用建議

### 最佳實踐

1. **同一個演唱會、同一座位區，來自不同賣家的門票**
   - 為每個購入來源創建單獨的購入記錄
   - 便於追蹤成本、賣家信息

2. **批量售出**
   - 建議為每一個買家創建一條售出記錄
   - 方便追蹤各買家的物流狀態

3. **狀態更新**
   - 定期更新售出狀態（待確認→已確認→已發貨→已完成）
   - 新增物流單號便於買家追蹤

4. **備註使用**
   - 記錄折扣、優惠、特殊協議
   - 記錄買家特殊要求（簽名、特殊包裝等）

---

## 🔗 相關頁面

- **門票列表**：主界面，查看所有門票和快速按鈕
- **購入來源列表**：查看/管理單個門票的所有購入記錄
- **售出詳情列表**：查看/管理單個門票的所有售出記錄

---

## ✅ 系統自動化

系統會自動：
- 📊 計算購入總成本
- 📊 計算售出總收入
- 🔄 更新門票的剩餘數量
- 📝 記錄所有時間戳

---

## 🚀 開始使用

1. 選擇一個門票
2. 點擊 **🔍 購入來源** 或 **💰 售出詳情**
3. 點擊 **➕ 添加** 按鈕
4. 填寫表單
5. 完成！

---

## 📞 常見問題

**Q: 可以編輯已經記錄的購入來源嗎？**
A: 可以！點擊 ✏️ 編輯按鈕即可修改。

**Q: 刪除售出記錄會怎樣？**
A: 系統會自動恢復門票的"已售出"數量，就像這筆交易沒有發生一樣。

**Q: 可以追蹤買家嗎？**
A: 可以！每條售出記錄中都有買家名稱、聯絡方式，便於後續跟進。

---

更新日期: 2025-11-19
