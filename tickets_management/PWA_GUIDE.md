# 演唱會門票管理系統 - PWA 應用指南

## 🎵 功能概述

這是一個完整的演唱會門票購買與銷售管理系統，支持以下功能：

- ✅ 門票購入管理（支援離線）
- ✅ 批量購入（支援離線）
- ✅ 門票賣出（支援離線）
- ✅ 交易記錄（支援離線）
- ✅ 統計分析（支援離線）
- ✅ **完全離線工作**

## ❓ 關於網路連接

### 短答案：**不需要一直在線**

首次安裝後，應用將快取所有必要的頁面和資源。之後可以**完全離線使用**！

### 詳細說明

| 場景 | 是否需要網路 | 說明 |
|------|-----------|------|
| 首次訪問 | ✅ 需要 | 下載並快取應用資源 (約 500KB) |
| 後續使用 | ❌ 不需要 | 使用快取資源，完全離線 |
| 添加記錄 | ❌ 不需要 | 數據保存在本地數據庫 |
| 查看記錄 | ❌ 不需要 | 從本地數據庫讀取 |
| 統計分析 | ❌ 不需要 | 實時計算本地數據 |
| 同步到伺服器 | ✅ 需要* | *可選，不影響使用 |

## 💾 數據存儲

### 本地存儲架構

```
手機本地存儲
├── Service Worker 快取
│   ├── 所有 HTML 頁面
│   ├── 樣式表和腳本
│   └── 資源文件
└── IndexedDB 數據庫
    ├── 門票信息
    ├── 交易記錄
    └── 統計數據
```

### 存儲位置
- **iOS**: `/Library/Caches/` 和 `/Library/Application Support/`
- **Android**: `/data/data/com.android.chrome/app_webview/`

### 存儲容量
- iOS: 取決於可用空間
- Android: 通常 50MB - 無限制

## 📱 在手機上安裝應用

### 第一次安裝（需要網路）

#### iOS (iPhone/iPad)

1. 打開 Safari
2. 訪問應用網址
3. 點擊底部分享按鈕 (⬆️ 方框)
4. 選擇「**添加到主螢幕**」
5. 輸入應用名稱 (預設: 門票管理)
6. 點擊「**添加**」
7. ✅ 完成！現在可以離線使用

#### Android

1. 打開 Chrome 或其他支援 PWA 的瀏覽器
2. 訪問應用網址
3. 點擊右上角菜單 (三點)
4. 選擇「**安裝應用**」或「**添加到主螢幕**」
5. 確認安裝
6. ✅ 完成！現在可以離線使用

### 之後的使用（不需要網路）

安裝後，您可以直接點擊手機主螢幕上的應用圖標打開應用，**不需要任何網路連接**。

## 🌐 離線工作原理

### 自動快取
- 首次訪問每個頁面時自動快取
- 快取包含 HTML、CSS、JavaScript
- 無需額外配置

### 離線優先
- 應用優先從快取讀取
- 如果有網路，會嘗試更新快取
- 斷網時仍然完全可用

### 自動同步
- 恢復網路連接時自動更新
- 無需手動操作
- 後台自動進行

## 💡 使用場景

### ✅ 完全可以離線使用
- 在沒有網路的地點記錄票務交易
- 無信號區域查看交易記錄
- 飛行模式下繼續工作
- 在演唱會現場實時記錄銷售

### ⚠️ 需要網路（可選）
- 首次安裝
- 檢查應用更新
- 備份數據到雲端（未實現）

## 🎯 主要功能

### 1. 購入門票
- 輸入演唱會日期、座位區域、價格
- 單筆或批量購入
- 數據立即保存在本地

### 2. 賣出門票
- 選擇已購入的門票
- 輸入賣出信息
- 自動計算港幣金額

### 3. 交易管理
- 完整的交易記錄
- 支援刪除誤操作的交易
- 自動調整門票數量

### 4. 統計分析
- 利潤/虧損計算
- 交易統計摘要
- 所有計算都在本地進行

## 🔒 數據安全

### 您的數據只存儲在您的設備上
- ❌ 不上傳到雲端
- ❌ 不共享給任何人
- ✅ 完全私密
- ✅ 完全由您控制

### 數據備份
- 定期導出數據
- 使用 iCloud/Google Drive 同步（手動）
- 建議每週備份一次

### 卸載應用
⚠️ 卸載應用會刪除所有本地數據，請先備份！

## 🚀 快速開始

### 第一次使用

1. 使用手機瀏覽器訪問應用
2. 安裝到主螢幕
3. 點擊應用圖標打開
4. 開始記錄門票交易！

### 離線使用

1. 打開飛行模式（可選）
2. 點擊應用圖標
3. 正常使用，所有功能可用
4. 數據自動保存

## 📊 演唱會日期與座位區域

每筆交易都記錄：
- 演唱會日期（方便按時間篩選）
- 座位區域（GA5、GA6、VIP 等）
- 便於後續統計分析

## ⚙️ 技術詳情

### 使用技術
- **Progressive Web App (PWA)**
- **Service Worker** 用於離線快取
- **IndexedDB** 用於本地數據存儲
- **響應式設計** 適配各種設備

### 離線優先策略
```
用戶請求
    ↓
檢查本地快取
    ↓
如果存在 → 返回快取 ✓
如果不存在 → 嘗試網路下載
    ↓
下載成功 → 保存快取 + 返回
下載失敗 → 返回離線頁面
```

## 📞 常見問題

### Q: 應用需要登錄嗎？
**A:** 不需要。應用無登錄系統，直接使用。

### Q: 數據會丟失嗎？
**A:** 
- 不會因為斷網丟失
- 卸載應用時會丟失（請先備份）
- 手機重啟不會丟失

### Q: 多個手機能同步嗎？
**A:** 目前不支援。每個手機/設備有獨立的數據庫。可手動導出/匯入備份。

### Q: 如何備份數據？
**A:** 
- iOS: 使用 Files 應用訪問應用沙箱
- Android: 使用檔案管理器或導出功能
- 建議定期手動導出

### Q: 應用佔用多少空間？
**A:** 
- 安裝: 約 500KB
- 每 1000 筆交易記錄: 約 100KB
- 總計通常 < 1MB

### Q: 能在平板上使用嗎？
**A:** 完全支援！應用響應式設計適配所有設備尺寸。

### Q: 如何清除快取？
**A:**
- iOS: 設置 → Safari → 清除歷史記錄和網站數據
- Android: 設置 → 應用 → 清除快取

### Q: 應用會自動更新嗎？
**A:** 會。每分鐘檢查一次更新，自動下載並應用。

### Q: 如果忘記卸載前備份怎麼辦？
**A:** 可惜數據會丟失。重新安裝應用時開始從零。建議定期備份！

## 💰 為什麼免費？

- 🎯 目的是幫助用戶管理票務
- 🤝 社區驅動的開發
- 💜 熱愛演唱會文化
- 🌍 開源項目

## 🤝 隱私政策

- ✅ 完全開源
- ✅ 無追蹤代碼
- ✅ 無分析工具
- ✅ 無廣告
- ✅ 100% 免費

## 🎁 額外功能

- 🌙 暗黑模式準備（後續版本）
- 📱 推送通知準備（後續版本）
- 📈 數據導出（後續版本）
- 📊 詳細報表（後續版本）

---

**版本**: 1.0.0 - 完全離線版  
**最後更新**: 2025年11月  
**狀態**: ✅ 可用 (完全離線，免費，無限制)
